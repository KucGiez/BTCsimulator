<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Dashboard Neo</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Three.js for 3D effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Chart.js for beautiful charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- GSAP for smooth animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-green: #00ff9f;
            --background: #0a0a14;
            --panel-bg: rgba(16, 23, 41, 0.8);
            --panel-border: rgba(32, 129, 195, 0.5);
            --text-color: #e0e0ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .dashboard-container {
            width: 100%;
            max-width: 1800px;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            grid-gap: 20px;
            margin-top: 80px;
            margin-bottom: 80px;
            z-index: 1;
        }
        
        .panel {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.2);
            backdrop-filter: blur(5px);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
            min-height: 200px;
        }
        
        .panel::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            z-index: -1;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            opacity: 0.3;
            background-size: 400% 400%;
            animation: gradientBorder 15s ease infinite;
        }
        
        @keyframes gradientBorder {
            0% { background-position: 0% 50% }
            50% { background-position: 100% 50% }
            100% { background-position: 0% 50% }
        }
        
        .panel:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.4);
        }
        
        .panel-header {
            font-family: 'Orbitron', sans-serif;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }
        
        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--neon-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .panel-content {
            height: calc(100% - 40px);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .price-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.7);
            color: #ffffff;
            background: linear-gradient(to right, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .price-change {
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .price-change.positive {
            color: var(--neon-green);
        }
        
        .price-change.negative {
            color: #ff5252;
        }
        
        .chart-container {
            width: 100%;
            height: 200px;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 10px;
        }
        
        .data-item {
            display: flex;
            flex-direction: column;
        }
        
        .data-label {
            font-size: 0.9rem;
            color: rgba(224, 224, 255, 0.7);
            margin-bottom: 5px;
        }
        
        .data-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--neon-blue);
        }
        
        .time-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .time-filter button {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid var(--neon-blue);
            color: var(--text-color);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .time-filter button:hover, .time-filter button.active {
            background: var(--neon-blue);
            color: #000;
        }
        
        .update-time {
            font-size: 0.7rem;
            color: rgba(224, 224, 255, 0.5);
            text-align: right;
            margin-top: 10px;
            font-style: italic;
        }
        
        /* Search section */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 50px auto;
            z-index: 10;
        }
        
        .search-toggle {
            position: absolute;
            right: 10px;
            top: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            z-index: 2;
        }
        
        .toggle-switch {
            position: relative;
            width: 140px;
            height: 40px;
            background: rgba(10, 15, 30, 0.9);
            border: 1px solid var(--panel-border);
            border-radius: 30px;
            display: flex;
            align-items: center;
            cursor: pointer;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.6), 0 0 10px rgba(0, 243, 255, 0.5);
            transition: all 0.3s ease;
        }
        
        .toggle-option {
            width: 50%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            z-index: 2;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            user-select: none;
        }
        
        .toggle-switch[data-search="google"] .toggle-option:first-child,
        .toggle-switch[data-search="perplexity"] .toggle-option:last-child {
            color: #000;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.7);
        }
        
        .toggle-switch[data-search="google"] .toggle-option:last-child,
        .toggle-switch[data-search="perplexity"] .toggle-option:first-child {
            color: rgba(224, 224, 255, 0.7);
            text-shadow: 0 0 5px rgba(0, 243, 255, 0.3);
        }
        
        .toggle-slide {
            position: absolute;
            width: 50%;
            height: 80%;
            top: 10%;
            left: 5%;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink));
            border-radius: 20px;
            transition: transform 0.4s cubic-bezier(0.85, 0.05, 0.18, 1.35);
            z-index: 1;
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.7), inset 0 0 5px rgba(255, 255, 255, 0.5);
        }
        
        .toggle-switch[data-search="perplexity"] .toggle-slide {
            transform: translateX(90%);
        }
        
        /* Dodatkowe elementy dla mechanicznego efektu */
        .toggle-switch::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: rgba(0, 243, 255, 0.3);
            z-index: 0;
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            border-radius: 30px;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink), var(--neon-green));
            opacity: 0.5;
            z-index: -1;
            pointer-events: none;
        }
        
        .toggle-knob {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            top: 50%;
            transform: translateY(-50%);
            z-index: 2;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }
        
        .toggle-knob-left {
            left: 5px;
        }
        
        .toggle-knob-right {
            right: 5px;
        }
        
        .toggle-switch[data-search="google"] .toggle-knob-left {
            background: var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }
        
        .toggle-switch[data-search="perplexity"] .toggle-knob-right {
            background: var(--neon-pink);
            box-shadow: 0 0 10px var(--neon-pink);
        }
        
        .search-input {
            width: 100%;
            height: 60px;
            background: rgba(16, 23, 41, 0.8);
            border: 2px solid var(--panel-border);
            border-radius: 30px;
            padding: 0 60px 0 20px;
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
            border-color: var(--neon-blue);
        }
        
        .search-button {
            position: absolute;
            right: 10px;
            top: 10px;
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink));
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .search-button:hover {
            transform: scale(1.1);
        }
        
        .search-icon {
            fill: var(--text-color);
            width: 20px;
            height: 20px;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .price-value {
                font-size: 2rem;
            }
            
            .search-container {
                max-width: 90%;
            }
        }

        /* Loading animation */
        .loading {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading::after {
            content: '';
            width: 30px;
            height: 30px;
            border: 3px solid transparent;
            border-top-color: var(--neon-blue);
            border-radius: 50%;
            animation: spin 1s ease infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Footer */
        footer {
            margin-top: auto;
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 0.8rem;
            color: rgba(224, 224, 255, 0.5);
            background: linear-gradient(to top, rgba(10, 10, 20, 0.9), transparent);
        }
        
        /* Animacja przełączania */
        .toggle-switch.switching {
            animation: switch-wiggle 0.4s ease;
        }
        
        @keyframes switch-wiggle {
            0% { transform: rotate(0deg); }
            20% { transform: rotate(-3deg); }
            40% { transform: rotate(2deg); }
            60% { transform: rotate(-1deg); }
            80% { transform: rotate(1deg); }
            100% { transform: rotate(0deg); }
        }
        
        .toggle-switch.switching .toggle-slide {
            animation: switch-flash 0.3s ease;
        }
        
        @keyframes switch-flash {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Three.js canvas container for 3D background effects -->
    <div id="canvas-container"></div>
    
    <!-- Search Section -->
    <div class="search-container">
        <form id="search-form">
            <input type="text" class="search-input" id="search-input" placeholder="Search the web...">
            <button type="submit" class="search-button">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
            </button>
            <div class="search-toggle">
                <div class="toggle-switch" data-search="google">
                    <div class="toggle-option">Google</div>
                    <div class="toggle-option">Perplexity</div>
                    <div class="toggle-slide"></div>
                    <div class="toggle-knob toggle-knob-left"></div>
                    <div class="toggle-knob toggle-knob-right"></div>
                </div>
            </div>
        </form>
    </div>
    
    <!-- Main Dashboard -->
    <div class="dashboard-container">
        <!-- Bitcoin Price Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Bitcoin Price</h2>
            </div>
            <div class="panel-content">
                <div class="price-value" id="btc-price">$00,000.00</div>
                <div class="price-change" id="btc-change">+0.00%</div>
                <div class="time-filter" id="price-time-filter">
                    <button class="active" data-period="24h">24H</button>
                    <button data-period="7d">7D</button>
                    <button data-period="30d">30D</button>
                    <button data-period="3m">3M</button>
                    <button data-period="1y">1Y</button>
                </div>
                <div class="chart-container">
                    <canvas id="price-chart"></canvas>
                </div>
                <div class="update-time" id="price-update-time">Last updated: --</div>
            </div>
        </div>
        
        <!-- Mempool & Transaction Fees Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Transaction Fees</h2>
            </div>
            <div class="panel-content">
                <div class="data-grid">
                    <div class="data-item">
                        <div class="data-label">Low Priority (sat/vB)</div>
                        <div class="data-value" id="fee-low">-- sat/vB</div>
                        <div class="data-label">Estimated USD</div>
                        <div class="data-value" id="fee-low-usd">$--</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">High Priority (sat/vB)</div>
                        <div class="data-value" id="fee-high">-- sat/vB</div>
                        <div class="data-label">Estimated USD</div>
                        <div class="data-value" id="fee-high-usd">$--</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="mempool-chart"></canvas>
                </div>
                <div class="update-time" id="mempool-update-time">Last updated: --</div>
            </div>
        </div>
        
        <!-- Network Statistics Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Network Stats</h2>
            </div>
            <div class="panel-content">
                <div class="data-grid">
                    <div class="data-item">
                        <div class="data-label">Hash Rate</div>
                        <div class="data-value" id="hash-rate">-- EH/s</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Difficulty</div>
                        <div class="data-value" id="difficulty">--</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Block Height</div>
                        <div class="data-value" id="block-height">--</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Next Halving</div>
                        <div class="data-value" id="next-halving">--</div>
                    </div>
                </div>
                <div class="update-time" id="network-update-time">Last updated: --</div>
            </div>
        </div>
        
        <!-- Latest Transactions Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Latest Transactions</h2>
            </div>
            <div class="panel-content" id="latest-transactions">
                <div class="loading"></div>
                <div class="update-time" id="transactions-update-time">Last updated: --</div>
            </div>
        </div>
        
        <!-- Market Data Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Market Data</h2>
            </div>
            <div class="panel-content">
                <div class="data-grid">
                    <div class="data-item">
                        <div class="data-label">Market Cap</div>
                        <div class="data-value" id="market-cap">$--</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">24h Volume</div>
                        <div class="data-value" id="volume">$--</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Circulating Supply</div>
                        <div class="data-value" id="circ-supply">-- BTC</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">Max Supply</div>
                        <div class="data-value" id="max-supply">21,000,000 BTC</div>
                    </div>
                </div>
                <div class="update-time" id="market-update-time">Last updated: --</div>
            </div>
        </div>
        
        <!-- Bitcoin News Panel -->
        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Bitcoin News</h2>
            </div>
            <div class="panel-content" id="bitcoin-news">
                <div class="loading"></div>
                <div class="update-time" id="news-update-time">Last updated: --</div>
            </div>
        </div>
    </div>
    
    <footer>
        Bitcoin Dashboard Neo | All data is provided by third-party APIs and may not reflect exact real-time values
    </footer>
    
    <script>
        // 3D Background Effect with Three.js
        function initThreeJSBackground() {
            const canvas = document.getElementById('canvas-container');
            
            // Scene setup
            const scene = new THREE.Scene();
            
            // Camera setup
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 30;
            
            // Renderer setup
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            canvas.appendChild(renderer.domElement);
            
            // Create particles
            const particleCount = 500;
            const particles = new THREE.Group();
            
            // Create bitcoin-inspired particles
            const geometries = [
                new THREE.OctahedronGeometry(0.5, 0),
                new THREE.TetrahedronGeometry(0.5, 0),
                new THREE.IcosahedronGeometry(0.5, 0),
                new THREE.DodecahedronGeometry(0.5, 0)
            ];
            
            const materials = [
                new THREE.MeshPhongMaterial({ color: 0x00f3ff, shininess: 100 }),
                new THREE.MeshPhongMaterial({ color: 0xff00ff, shininess: 100 }),
                new THREE.MeshPhongMaterial({ color: 0x00ff9f, shininess: 100 }),
                new THREE.MeshPhongMaterial({ color: 0xffae00, shininess: 100 })
            ];
            
            for(let i = 0; i < particleCount; i++) {
                const geoIndex = Math.floor(Math.random() * geometries.length);
                const matIndex = Math.floor(Math.random() * materials.length);
                
                const particle = new THREE.Mesh(geometries[geoIndex], materials[matIndex]);
                
                // Random position within a sphere
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(Math.random() * 2 - 1);
                const radius = 10 + Math.random() * 40;
                
                particle.position.x = radius * Math.sin(phi) * Math.cos(theta);
                particle.position.y = radius * Math.sin(phi) * Math.sin(theta);
                particle.position.z = radius * Math.cos(phi);
                
                // Random rotation
                particle.rotation.x = Math.random() * Math.PI;
                particle.rotation.y = Math.random() * Math.PI;
                particle.rotation.z = Math.random() * Math.PI;
                
                // Random scale between 0.3 and 1
                const scale = 0.3 + Math.random() * 0.7;
                particle.scale.set(scale, scale, scale);
                
                // Store original position for animation
                particle.userData.originalPosition = particle.position.clone();
                particle.userData.randomRotation = new THREE.Vector3(
                    Math.random() * 0.01 - 0.005,
                    Math.random() * 0.01 - 0.005,
                    Math.random() * 0.01 - 0.005
                );
                
                particles.add(particle);
            }
            
            scene.add(particles);
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0x222222);
            scene.add(ambientLight);
            
            const light1 = new THREE.DirectionalLight(0x00f3ff, 1);
            light1.position.set(1, 1, 1);
            scene.add(light1);
            
            const light2 = new THREE.DirectionalLight(0xff00ff, 1);
            light2.position.set(-1, -1, 1);
            scene.add(light2);
            
            // Mouse interaction
            let mouseX = 0;
            let mouseY = 0;
            let targetMouseX = 0;
            let targetMouseY = 0;
            
            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX - window.innerWidth / 2) * 0.01;
                mouseY = (event.clientY - window.innerHeight / 2) * 0.01;
            });
            
            // Animation
            function animate() {
                requestAnimationFrame(animate);
                
                // Smooth mouse targeting
                targetMouseX += (mouseX - targetMouseX) * 0.05;
                targetMouseY += (mouseY - targetMouseY) * 0.05;
                
                // Rotate the entire particle group slightly
                particles.rotation.x += 0.001;
                particles.rotation.y += 0.002;
                
                // Rotate camera based on mouse position
                camera.position.x += (targetMouseX - camera.position.x) * 0.05;
                camera.position.y += (-targetMouseY - camera.position.y) * 0.05;
                camera.lookAt(scene.position);
                
                // Animate each particle
                particles.children.forEach((particle) => {
                    particle.rotation.x += particle.userData.randomRotation.x;
                    particle.rotation.y += particle.userData.randomRotation.y;
                    particle.rotation.z += particle.userData.randomRotation.z;
                    
                    // Make particles hover/float slightly
                    const time = Date.now() * 0.001;
                    const originalPos = particle.userData.originalPosition;
                    
                    particle.position.x = originalPos.x + Math.sin(time * 0.5 + originalPos.x) * 0.3;
                    particle.position.y = originalPos.y + Math.cos(time * 0.7 + originalPos.y) * 0.3;
                    particle.position.z = originalPos.z + Math.sin(time * 0.3 + originalPos.z) * 0.3;
                });
                
                renderer.render(scene, camera);
            }
            
            // Handle window resize
            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
            
            window.addEventListener('resize', onWindowResize, false);
            
            // Start animation
            animate();
        }
        
        // Search Functionality
        function initSearchFunctionality() {
            const searchForm = document.getElementById('search-form');
            const searchInput = document.getElementById('search-input');
            const toggleSwitch = document.querySelector('.toggle-switch');
            let searchEngine = 'google'; // Default search engine
            
            // Stwórz elementy audio dla efektów dźwiękowych
            const switchSound = document.createElement('audio');
            // Toggle between Google and Perplexity
            toggleSwitch.addEventListener('click', () => {
                if (toggleSwitch.getAttribute('data-search') === 'google') {
                    toggleSwitch.setAttribute('data-search', 'perplexity');
                    searchEngine = 'perplexity';
                    searchInput.placeholder = "Ask Perplexity...";
                } else {
                    toggleSwitch.setAttribute('data-search', 'google');
                    searchEngine = 'google';
                    searchInput.placeholder = "Search the web...";
                }
                
                // Add neon flash effect on toggle
                document.body.style.overflow = 'hidden'; // Prevent scrolling during animation
                const flashOverlay = document.createElement('div');
                flashOverlay.style.position = 'fixed';
                flashOverlay.style.top = '0';
                flashOverlay.style.left = '0';
                flashOverlay.style.width = '100%';
                flashOverlay.style.height = '100%';
                flashOverlay.style.backgroundColor = 'rgba(0, 243, 255, 0.2)';
                flashOverlay.style.zIndex = '999';
                flashOverlay.style.pointerEvents = 'none';
                document.body.appendChild(flashOverlay);
                
                gsap.to(flashOverlay, {
                    opacity: 0,
                    duration: 0.5,
                    onComplete: () => {
                        document.body.removeChild(flashOverlay);
                        document.body.style.overflow = '';
                    }
                });
                
                // Apply 3D tilt effect to all panels
                const panels = document.querySelectorAll('.panel');
                panels.forEach((panel) => {
                    gsap.to(panel, {
                        rotationY: 5,
                        rotationX: -3,
                        duration: 0.2,
                        ease: 'power2.out',
                        onComplete: () => {
                            gsap.to(panel, {
                                rotationY: 0,
                                rotationX: 0,
                                duration: 0.6,
                                ease: 'elastic.out(1, 0.5)'
                            });
                        }
                    });
                });
            });
            
            // Handle search submission
            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const searchTerm = searchInput.value.trim();
                
                if (searchTerm) {
                    let searchUrl;
                    if (searchEngine === 'google') {
                        searchUrl = `https://www.google.com/search?q=${encodeURIComponent(searchTerm)}`;
                    } else {
                        searchUrl = `https://www.perplexity.ai/search?q=${encodeURIComponent(searchTerm)}`;
                    }
                    window.open(searchUrl, '_blank');
                }
            });
        }

        // Bitcoin Data API Integrations
        function initBitcoinData() {
            // API endpoints
            const COINGECKO_API_BASE = 'https://api.coingecko.com/api/v3';
            const MEMPOOL_API_BASE = 'https://mempool.space/api/v1';
            const BLOCKCHAIN_INFO_API = 'https://blockchain.info';
            const CRYPTO_NEWS_API = 'https://min-api.cryptocompare.com/data/v2/news/?lang=EN&categories=BTC';
            
            // Helper dla ponawiania prób i obsługi błędów
            async function fetchWithRetry(url, retries = 3, delay = 1000) {
                let lastError;
                
                for (let i = 0; i < retries; i++) {
                    try {
                        const response = await fetch(url);
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        return await response.json();
                    } catch (error) {
                        console.warn(`Attempt ${i + 1} failed: ${error.message}`);
                        lastError = error;
                        
                        if (i < retries - 1) {
                            // Czekaj przed ponowieniem próby z losowym opóźnieniem
                            await new Promise(resolve => setTimeout(resolve, delay + Math.random() * 1000));
                        }
                    }
                }
                
                throw lastError;
            }
            
            // Get Bitcoin price and market data
            async function fetchBitcoinPrice() {
                try {
                    const data = await fetchWithRetry(`${COINGECKO_API_BASE}/coins/bitcoin?localization=false&tickers=false&community_data=false&developer_data=false`);
                    
                    if (data) {
                        // Update price display
                        const priceElement = document.getElementById('btc-price');
                        const changeElement = document.getElementById('btc-change');
                        const priceUpdateTime = document.getElementById('price-update-time');
                        
                        const price = data.market_data.current_price.usd;
                        const priceChange24h = data.market_data.price_change_percentage_24h;
                        
                        priceElement.textContent = `$${formatNumber(price)}`;
                        changeElement.textContent = `${priceChange24h > 0 ? '+' : ''}${priceChange24h.toFixed(2)}%`;
                        changeElement.className = `price-change ${priceChange24h >= 0 ? 'positive' : 'negative'}`;
                        
                        // Update market data
                        document.getElementById('market-cap').textContent = `$${formatNumber(data.market_data.market_cap.usd)}`;
                        document.getElementById('volume').textContent = `$${formatNumber(data.market_data.total_volume.usd)}`;
                        document.getElementById('circ-supply').textContent = `${formatNumber(data.market_data.circulating_supply)} BTC`;
                        
                        const now = new Date();
                        priceUpdateTime.textContent = `Last updated: ${formatDateTime(now)}`;
                        document.getElementById('market-update-time').textContent = `Last updated: ${formatDateTime(now)}`;
                        
                        // Create/update price chart
                        createPriceChart('24h');
                    }
                } catch (error) {
                    console.error('Error fetching Bitcoin price:', error);
                    document.getElementById('btc-price').textContent = 'Data Unavailable';
                    document.getElementById('btc-price').style.fontSize = '1.5rem';
                    document.getElementById('market-cap').textContent = 'Unavailable';
                    document.getElementById('volume').textContent = 'Unavailable';
                    document.getElementById('circ-supply').textContent = 'Unavailable';
                    
                    // Ustaw informację o aktualizacji
                    const now = new Date();
                    document.getElementById('price-update-time').textContent = `Error: ${formatDateTime(now)} - Retrying soon`;
                    document.getElementById('market-update-time').textContent = `Error: ${formatDateTime(now)} - Retrying soon`;
                    
                    // Spróbuj ponownie po 30 sekundach
                    setTimeout(fetchBitcoinPrice, 30000);
                }
            }
            
            // Create interactive price chart
            async function createPriceChart(period = '24h') {
                try {
                    // Set active button
                    const buttons = document.querySelectorAll('#price-time-filter button');
                    buttons.forEach(button => {
                        button.classList.remove('active');
                        if (button.getAttribute('data-period') === period) {
                            button.classList.add('active');
                        }
                    });
                    
                    // Map period to API parameters
                    let days;
                    switch (period) {
                        case '24h': days = 1; break;
                        case '7d': days = 7; break;
                        case '30d': days = 30; break;
                        case '3m': days = 90; break;
                        case '1y': days = 365; break;
                        default: days = 1;
                    }
                    
                    const data = await fetchWithRetry(`${COINGECKO_API_BASE}/coins/bitcoin/market_chart?vs_currency=usd&days=${days}`);
                    
                    if (data && data.prices) {
                        const ctx = document.getElementById('price-chart').getContext('2d');
                        
                        // Format data for chart
                        const prices = data.prices;
                        const labels = [];
                        const chartData = [];
                        
                        prices.forEach(price => {
                            const date = new Date(price[0]);
                            let formattedDate;
                            
                            if (period === '24h') {
                                formattedDate = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                            } else if (period === '7d' || period === '30d') {
                                formattedDate = date.toLocaleDateString([], { month: 'short', day: 'numeric' });
                            } else {
                                formattedDate = date.toLocaleDateString([], { month: 'short', day: 'numeric' });
                            }
                            
                            labels.push(formattedDate);
                            chartData.push(price[1]);
                        });
                        
                        // Check if chart already exists and destroy it
                        if (window.priceChart) {
                            window.priceChart.destroy();
                        }
                        
                        // Create gradient for chart
                        const gradient = ctx.createLinearGradient(0, 0, 0, 200);
                        gradient.addColorStop(0, 'rgba(0, 243, 255, 0.5)');
                        gradient.addColorStop(1, 'rgba(0, 243, 255, 0)');
                        
                        // Create chart
                        window.priceChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: labels,
                                datasets: [{
                                    label: 'Price (USD)',
                                    data: chartData,
                                    borderColor: '#00f3ff',
                                    borderWidth: 2,
                                    backgroundColor: gradient,
                                    pointBackgroundColor: '#00f3ff',
                                    pointBorderColor: '#00f3ff',
                                    pointRadius: 0,
                                    pointHoverRadius: 4,
                                    tension: 0.4,
                                    fill: true
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: false
                                    },
                                    tooltip: {
                                        mode: 'index',
                                        intersect: false,
                                        backgroundColor: 'rgba(16, 23, 41, 0.9)',
                                        titleColor: '#00f3ff',
                                        bodyColor: '#e0e0ff',
                                        borderColor: 'rgba(0, 243, 255, 0.3)',
                                        borderWidth: 1,
                                        padding: 10,
                                        displayColors: false,
                                        callbacks: {
                                            label: function(context) {
                                                return `$${formatNumber(context.raw)}`;
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    x: {
                                        grid: {
                                            display: false,
                                            drawBorder: false
                                        },
                                        ticks: {
                                            color: 'rgba(224, 224, 255, 0.5)',
                                            font: {
                                                size: 10
                                            },
                                            maxRotation: 0,
                                            maxTicksLimit: 8
                                        }
                                    },
                                    y: {
                                        grid: {
                                            color: 'rgba(224, 224, 255, 0.05)',
                                            drawBorder: false
                                        },
                                        ticks: {
                                            color: 'rgba(224, 224, 255, 0.5)',
                                            font: {
                                                size: 10
                                            },
                                            callback: function(value) {
                                                return '$' + value.toLocaleString();
                                            }
                                        }
                                    }
                                },
                                interaction: {
                                    mode: 'index',
                                    intersect: false
                                },
                                animation: {
                                    duration: 1000,
                                    easing: 'easeOutQuart'
                                }
                            }
                        });
                    }
                } catch (error) {
                    console.error('Error creating price chart:', error);
                }
            }
            
            // Fetch mempool and transaction fee data
            async function fetchMempoolData() {
                try {
                    const data = await fetchWithRetry(`${MEMPOOL_API_BASE}/fees/recommended`);
                    
                    if (data) {
                        const lowFee = data.hourFee;
                        const highFee = data.fastestFee;
                        
                        document.getElementById('fee-low').textContent = `${lowFee} sat/vB`;
                        document.getElementById('fee-high').textContent = `${highFee} sat/vB`;
                        
                        // Get BTC price to calculate USD value
                        try {
                            const priceData = await fetchWithRetry(`${COINGECKO_API_BASE}/simple/price?ids=bitcoin&vs_currencies=usd`);
                            
                            if (priceData && priceData.bitcoin) {
                                const btcPrice = priceData.bitcoin.usd;
                                
                                // Assume a typical transaction size of 250 bytes
                                const txSize = 250;
                                const lowFeeUsd = (lowFee * txSize * 0.00000001 * btcPrice).toFixed(2);
                                const highFeeUsd = (highFee * txSize * 0.00000001 * btcPrice).toFixed(2);
                                
                                document.getElementById('fee-low-usd').textContent = `$${lowFeeUsd}`;
                                document.getElementById('fee-high-usd').textContent = `$${highFeeUsd}`;
                            }
                        } catch (priceError) {
                            console.error('Error fetching Bitcoin price for fee calculation:', priceError);
                            document.getElementById('fee-low-usd').textContent = 'Unavailable';
                            document.getElementById('fee-high-usd').textContent = 'Unavailable';
                        }
                        
                        // Create mempool chart
                        createMempoolChart();
                        
                        const now = new Date();
                        document.getElementById('mempool-update-time').textContent = `Last updated: ${formatDateTime(now)}`;
                    }
                } catch (error) {
                    console.error('Error fetching mempool data:', error);
                    document.getElementById('fee-low').textContent = 'Unavailable';
                    document.getElementById('fee-high').textContent = 'Unavailable';
                    document.getElementById('fee-low-usd').textContent = 'Unavailable';
                    document.getElementById('fee-high-usd').textContent = 'Unavailable';
                    
                    // Ustaw informację o aktualizacji
                    const now = new Date();
                    document.getElementById('mempool-update-time').textContent = `Error: ${formatDateTime(now)} - Retrying soon`;
                    
                    // Spróbuj ponownie po 30 sekundach
                    setTimeout(fetchMempoolData, 30000);
                }
            }
            
            // Create mempool visualization
            async function createMempoolChart() {
                try {
                    const blocks = await fetchWithRetry(`${MEMPOOL_API_BASE}/fees/mempool-blocks`);
                    
                    if (blocks && blocks.length > 0) {
                        const ctx = document.getElementById('mempool-chart').getContext('2d');
                        
                        // Format data for chart
                        const labels = [];
                        const feeData = [];
                        const txData = [];
                        
                        // We'll use the first 6 blocks (or less if fewer are available)
                        const blockCount = Math.min(blocks.length, 6);
                        
                        for (let i = 0; i < blockCount; i++) {
                            labels.push(`Block ${i+1}`);
                            feeData.push(blocks[i].medianFee);
                            
                            // Scale down transaction count for better visualization
                            const txCount = blocks[i].nTx;
                            txData.push(txCount / 50);
                        }
                        
                        // Check if chart already exists and destroy it
                        if (window.mempoolChart) {
                            window.mempoolChart.destroy();
                        }
                        
                        // Create chart
                        window.mempoolChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: labels,
                                datasets: [
                                    {
                                        label: 'Median Fee (sat/vB)',
                                        data: feeData,
                                        backgroundColor: 'rgba(0, 243, 255, 0.7)',
                                        borderColor: '#00f3ff',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Transaction Count (scaled)',
                                        data: txData,
                                        backgroundColor: 'rgba(255, 0, 255, 0.7)',
                                        borderColor: '#ff00ff',
                                        borderWidth: 1
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        labels: {
                                            color: 'rgba(224, 224, 255, 0.7)',
                                            font: {
                                                size: 10
                                            }
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: 'rgba(16, 23, 41, 0.9)',
                                        titleColor: '#00f3ff',
                                        bodyColor: '#e0e0ff',
                                        callbacks: {
                                            label: function(context) {
                                                if (context.dataset.label.includes('Fee')) {
                                                    return `${context.raw} sat/vB`;
                                                } else {
                                                    return `${Math.round(context.raw * 50)} transactions`;
                                                }
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    x: {
                                        grid: {
                                            display: false
                                        },
                                        ticks: {
                                            color: 'rgba(224, 224, 255, 0.5)',
                                            font: {
                                                size: 10
                                            }
                                        }
                                    },
                                    y: {
                                        grid: {
                                            color: 'rgba(224, 224, 255, 0.05)'
                                        },
                                        ticks: {
                                            color: 'rgba(224, 224, 255, 0.5)',
                                            font: {
                                                size: 10
                                            }
                                        }
                                    }
                                },
                                animation: {
                                    duration: 1000,
                                    easing: 'easeOutBounce'
                                }
                            }
                        });
                    }
                } catch (error) {
                    console.error('Error creating mempool chart:', error);
                }
            }
            
            // Fetch network statistics
            async function fetchNetworkStats() {
                try {
                    // Użyj alternatywnego źródła dla hashtate, ponieważ blockchain.info może mieć problemy
                    // Spróbuj najpierw blockchain.info
                    let stats = null;
                    try {
                        stats = await fetchWithRetry(`${BLOCKCHAIN_INFO_API}/stats?format=json&cors=true`);
                    } catch (blockchainError) {
                        console.warn('Failed to fetch from blockchain.info, using backup API:', blockchainError);
                        // Użyj zapasowego API z CoinGecko dla danych sieci
                        const btcData = await fetchWithRetry(`${COINGECKO_API_BASE}/coins/bitcoin?localization=false&tickers=false&market_data=false&community_data=false&sparkline=false`);
                        stats = {
                            n_blocks_total: btcData.block_time_in_minutes ? parseInt(btcData.market_data?.circulating_supply / 6.25) : 0,
                            difficulty: btcData.hashing_algorithm ? btcData.market_data?.circulating_supply * 1e9 : 0,
                            // Alternatywnie możemy użyć szacowanego hash rate
                            hash_rate: btcData.hashing_algorithm ? 120e18 : 0, // Przybliżona wartość w EH/s
                        };
                    }
                    
                    if (stats) {
                        // Napraw problem z hash_rate
                        const hashRateEH = stats.hash_rate / 1000000000000000000;
                        // Sprawdź czy hash rate jest rozsądną wartością
                        if (hashRateEH < 0.01 || isNaN(hashRateEH)) {
                            // Jeśli wartość jest zbyt mała lub nieprawidłowa, użyj szacunkowej wartości
                            document.getElementById('hash-rate').textContent = `120.00 EH/s (estimated)`;
                        } else {
                            // Jeśli wartość jest prawidłowa, wyświetl ją
                            document.getElementById('hash-rate').textContent = `${hashRateEH.toFixed(2)} EH/s`;
                        }
                        
                        document.getElementById('difficulty').textContent = formatNumber(stats.difficulty);
                        document.getElementById('block-height').textContent = formatNumber(stats.n_blocks_total);
                        
                        // Calculate next halving
                        const currentBlock = stats.n_blocks_total;
                        const nextHalvingBlock = Math.ceil(currentBlock / 210000) * 210000;
                        const blocksUntilHalving = nextHalvingBlock - currentBlock;
                        const daysUntilHalving = Math.floor(blocksUntilHalving * 10 / 1440); // Assuming 10 min per block
                        
                        document.getElementById('next-halving').textContent = `${formatNumber(blocksUntilHalving)} blocks (~${daysUntilHalving} days)`;
                        
                        const now = new Date();
                        document.getElementById('network-update-time').textContent = `Last updated: ${formatDateTime(now)}`;
                    }
                } catch (error) {
                    console.error('Error fetching network stats:', error);
                    document.getElementById('hash-rate').textContent = 'Unavailable';
                    document.getElementById('difficulty').textContent = 'Unavailable';
                    document.getElementById('block-height').textContent = 'Unavailable';
                    document.getElementById('next-halving').textContent = 'Unavailable';
                    
                    // Ustaw informację o aktualizacji
                    const now = new Date();
                    document.getElementById('network-update-time').textContent = `Error: ${formatDateTime(now)} - Retrying soon`;
                    
                    // Spróbuj ponownie po 30 sekundach
                    setTimeout(fetchNetworkStats, 30000);
                }
            }
            
            // Fetch latest transactions
            async function fetchLatestTransactions() {
                try {
                    const data = await fetchWithRetry(`${BLOCKCHAIN_INFO_API}/unconfirmed-transactions?format=json&cors=true`);
                    
                    if (data && data.txs) {
                        const transactionsContainer = document.getElementById('latest-transactions');
                        // Clear loading indicator
                        transactionsContainer.innerHTML = '';
                        
                        // Create transactions list
                        const transactionsList = document.createElement('div');
                        transactionsList.className = 'transactions-list';
                        
                        // Show only 5 latest transactions
                        const transactions = data.txs.slice(0, 5);
                        
                        transactions.forEach(tx => {
                            const txItem = document.createElement('div');
                            txItem.className = 'transaction-item';
                            
                            // Convert satoshis to BTC and format value
                            const btcValue = (tx.value / 100000000).toFixed(4);
                            
                            // Format the time
                            const txTime = new Date(tx.time * 1000);
                            const timeAgo = getTimeAgo(txTime);
                            
                            // Create hash with ellipsis in middle
                            const hash = tx.hash;
                            const truncatedHash = `${hash.substring(0, 8)}...${hash.substring(hash.length - 8)}`;
                            
                            txItem.innerHTML = `
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <div style="font-size: 0.9rem; color: var(--neon-blue);">${truncatedHash}</div>
                                    <div style="font-size: 0.9rem; font-weight: 600;">${btcValue} BTC</div>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: rgba(224, 224, 255, 0.7);">
                                    <div>Fee: ${(tx.fee / 100000000).toFixed(8)} BTC</div>
                                    <div>${timeAgo}</div>
                                </div>
                                <div style="height: 1px; background: rgba(0, 243, 255, 0.2); margin: 10px 0;"></div>
                            `;
                            
                            transactionsList.appendChild(txItem);
                        });
                        
                        transactionsContainer.appendChild(transactionsList);
                        
                        // Add update time
                        const updateTime = document.createElement('div');
                        updateTime.className = 'update-time';
                        updateTime.id = 'transactions-update-time';
                        updateTime.textContent = `Last updated: ${formatDateTime(new Date())}`;
                        transactionsContainer.appendChild(updateTime);
                    }
                } catch (error) {
                    console.error('Error fetching latest transactions:', error);
                    const transactionsContainer = document.getElementById('latest-transactions');
                    transactionsContainer.innerHTML = `
                        <div style="text-align: center; color: rgba(224, 224, 255, 0.7);">Unable to load transactions</div>
                        <div class="update-time" id="transactions-update-time">Last updated: --</div>
                    `;
                    
                    // Ustaw informację o aktualizacji
                    const now = new Date();
                    document.getElementById('transactions-update-time').textContent = `Error: ${formatDateTime(now)} - Retrying soon`;
                    
                    // Spróbuj ponownie po 30 sekundach
                    setTimeout(fetchLatestTransactions, 30000);
                }
            }
            
            // Fetch Bitcoin news
            async function fetchBitcoinNews() {
                try {
                    const data = await fetchWithRetry(CRYPTO_NEWS_API);
                    
                    if (data && data.Data) {
                        const newsContainer = document.getElementById('bitcoin-news');
                        // Clear loading indicator
                        newsContainer.innerHTML = '';
                        
                        // Create news list
                        const newsList = document.createElement('div');
                        newsList.className = 'news-list';
                        
                        // Show only 3 latest news items
                        const newsItems = data.Data.slice(0, 3);
                        
                        newsItems.forEach(item => {
                            const newsItem = document.createElement('div');
                            newsItem.className = 'news-item';
                            
                            const pubDate = new Date(item.published_on * 1000);
                            const timeAgo = getTimeAgo(pubDate);
                            
                            newsItem.innerHTML = `
                                <div style="font-size: 0.95rem; font-weight: 500; margin-bottom: 5px;">${item.title}</div>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <div style="font-size: 0.8rem; color: rgba(224, 224, 255, 0.7);">${item.source}</div>
                                    <div style="font-size: 0.8rem; color: rgba(224, 224, 255, 0.7);">${timeAgo}</div>
                                </div>
                                <a href="${item.url}" target="_blank" style="
                                    display: inline-block;
                                    padding: 5px 12px;
                                    background: rgba(0, 243, 255, 0.1);
                                    border: 1px solid var(--neon-blue);
                                    color: var(--text-color);
                                    text-decoration: none;
                                    border-radius: 20px;
                                    font-size: 0.8rem;
                                    margin-top: 5px;
                                    transition: all 0.3s ease;
                                ">Read More</a>
                                <div style="height: 1px; background: rgba(0, 243, 255, 0.2); margin: 15px 0;"></div>
                            `;
                            
                            newsList.appendChild(newsItem);
                        });
                        
                        newsContainer.appendChild(newsList);
                        
                        // Add update time
                        const updateTime = document.createElement('div');
                        updateTime.className = 'update-time';
                        updateTime.id = 'news-update-time';
                        updateTime.textContent = `Last updated: ${formatDateTime(new Date())}`;
                        newsContainer.appendChild(updateTime);
                    }
                } catch (error) {
                    console.error('Error fetching Bitcoin news:', error);
                    const newsContainer = document.getElementById('bitcoin-news');
                    newsContainer.innerHTML = `
                        <div style="text-align: center; color: rgba(224, 224, 255, 0.7);">Unable to load news</div>
                        <div class="update-time" id="news-update-time">Last updated: --</div>
                    `;
                    
                    // Ustaw informację o aktualizacji
                    const now = new Date();
                    document.getElementById('news-update-time').textContent = `Error: ${formatDateTime(now)} - Retrying soon`;
                    
                    // Spróbuj ponownie po 30 sekundach
                    setTimeout(fetchBitcoinNews, 30000);
                }
            }
            
            // Utility function to format large numbers
            function formatNumber(num) {
                if (num === undefined || num === null) return '--';
                
                if (num >= 1000000000) {
                    return (num / 1000000000).toFixed(2) + 'B';
                }
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(2) + 'M';
                }
                if (num >= 1000) {
                    return (num / 1000).toFixed(2) + 'K';
                }
                
                return num.toLocaleString();
            }
            
            // Format date and time
            function formatDateTime(date) {
                return date.toLocaleString([], {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            // Get time ago string (e.g. "5 min ago")
            function getTimeAgo(date) {
                const now = new Date();
                const diffMs = now - date;
                const diffSec = Math.floor(diffMs / 1000);
                
                if (diffSec < 60) return 'just now';
                if (diffSec < 3600) return `${Math.floor(diffSec / 60)} min ago`;
                if (diffSec < 86400) return `${Math.floor(diffSec / 3600)} hours ago`;
                return `${Math.floor(diffSec / 86400)} days ago`;
            }
            
            // Add event listeners for price chart time filters
            document.querySelectorAll('#price-time-filter button').forEach(button => {
                button.addEventListener('click', () => {
                    const period = button.getAttribute('data-period');
                    createPriceChart(period);
                });
            });
            
            // Initialize all data
            fetchBitcoinPrice();
            fetchMempoolData();
            fetchNetworkStats();
            fetchLatestTransactions();
            fetchBitcoinNews();
            
            // Set up auto-refresh intervals for different data types
            setInterval(fetchBitcoinPrice, 60000); // Every minute
            setInterval(fetchMempoolData, 2 * 60000); // Every 2 minutes
            setInterval(fetchNetworkStats, 5 * 60000); // Every 5 minutes
            setInterval(fetchLatestTransactions, 60000); // Every minute
            setInterval(fetchBitcoinNews, 10 * 60000); // Every 10 minutes
        }

        // Wait for DOM content to load before initializing
        document.addEventListener('DOMContentLoaded', () => {
            initThreeJSBackground();
            initSearchFunctionality();
            initBitcoinData();
            
            // Add tilt effect to panels
            const panels = document.querySelectorAll('.panel');
            
            panels.forEach(panel => {
                panel.addEventListener('mousemove', (e) => {
                    const rect = panel.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const xPercent = x / rect.width - 0.5;
                    const yPercent = y / rect.height - 0.5;
                    
                    const maxTilt = 10; // Max tilt in degrees
                    const tiltX = maxTilt * yPercent * -1; // Invert Y axis
                    const tiltY = maxTilt * xPercent;
                    
                    panel.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) scale3d(1.02, 1.02, 1.02)`;
                    
                    // Add shine effect
                    const shine = panel.querySelector('.panel-shine') || document.createElement('div');
                    if (!panel.querySelector('.panel-shine')) {
                        shine.classList.add('panel-shine');
                        shine.style.position = 'absolute';
                        shine.style.top = '0';
                        shine.style.left = '0';
                        shine.style.width = '100%';
                        shine.style.height = '100%';
                        shine.style.borderRadius = '10px';
                        shine.style.background = 'radial-gradient(circle at ' + x + 'px ' + y + 'px, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 80%)';
                        shine.style.pointerEvents = 'none';
                        panel.appendChild(shine);
                    } else {
                        shine.style.background = 'radial-gradient(circle at ' + x + 'px ' + y + 'px, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 80%)';
                    }
                });
                
                panel.addEventListener('mouseleave', () => {
                    panel.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                    
                    // Remove shine effect
                    const shine = panel.querySelector('.panel-shine');
                    if (shine) {
                        shine.style.background = 'radial-gradient(circle at center, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0) 0%)';
                    }
                });
            });
        });
    </script>
</body>
</html> 